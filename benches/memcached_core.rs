use criterion::{BatchSize, Criterion, criterion_group, criterion_main};
use mtop_client::{Key, Memcached};
use std::io::Cursor;
use std::sync::OnceLock;
use tokio::runtime::Runtime;

static RT: OnceLock<Runtime> = OnceLock::new();

fn memcached_stats(c: &mut Criterion) {
    let runtime = RT.get_or_init(|| Runtime::new().unwrap());

    c.bench_function("Memcached::stats", |b| {
        b.iter_batched(
            || Memcached::new(Cursor::new(STATS), Vec::new()),
            |mut conn| {
                runtime.block_on(async {
                    let _ = conn.stats().await.unwrap();
                })
            },
            BatchSize::SmallInput,
        )
    });

    c.bench_function("Memcached::metas", |b| {
        b.iter_batched(
            || Memcached::new(Cursor::new(METAS), Vec::new()),
            |mut conn| {
                runtime.block_on(async {
                    let _ = conn.metas().await.unwrap();
                })
            },
            BatchSize::SmallInput,
        )
    });
}

fn memcached_read_write(c: &mut Criterion) {
    let runtime = RT.get_or_init(|| Runtime::new().unwrap());

    c.bench_function("Memcached::get", |b| {
        b.iter_batched(
            || Memcached::new(Cursor::new(GETS), Vec::new()),
            |mut conn| {
                runtime.block_on(async {
                    let _ = conn.get(
                        &[
                            Key::one("foo1").unwrap(),
                            Key::one("foo2").unwrap(),
                            Key::one("foo3").unwrap(),
                            Key::one("foo4").unwrap(),
                            Key::one("foo5").unwrap(),
                            Key::one("foo6").unwrap(),
                            Key::one("foo7").unwrap(),
                            Key::one("foo8").unwrap(),
                            Key::one("foo9").unwrap(),
                            Key::one("foo10").unwrap(),
                        ]
                    ).await.unwrap();
                })
            },
            BatchSize::SmallInput,
        )
    });
}

criterion_group!(memcached_core, memcached_stats, memcached_read_write);
criterion_main!(memcached_core);

const STATS: &str = concat!(
    "STAT pid 1525\r\n",
    "STAT uptime 271984\r\n",
    "STAT time 1687212809\r\n",
    "STAT version 1.6.14\r\n",
    "STAT libevent 2.1.12-stable\r\n",
    "STAT pointer_size 64\r\n",
    "STAT rusage_user 17.544323\r\n",
    "STAT rusage_system 11.830461\r\n",
    "STAT max_connections 1024\r\n",
    "STAT curr_connections 1\r\n",
    "STAT total_connections 3\r\n",
    "STAT rejected_connections 0\r\n",
    "STAT connection_structures 2\r\n",
    "STAT response_obj_oom 0\r\n",
    "STAT response_obj_count 1\r\n",
    "STAT response_obj_bytes 32768\r\n",
    "STAT read_buf_count 4\r\n",
    "STAT read_buf_bytes 65536\r\n",
    "STAT read_buf_bytes_free 16384\r\n",
    "STAT read_buf_oom 0\r\n",
    "STAT reserved_fds 20\r\n",
    "STAT cmd_get 1\r\n",
    "STAT cmd_set 0\r\n",
    "STAT cmd_flush 0\r\n",
    "STAT cmd_touch 0\r\n",
    "STAT cmd_meta 0\r\n",
    "STAT get_hits 0\r\n",
    "STAT get_misses 1\r\n",
    "STAT get_expired 0\r\n",
    "STAT get_flushed 0\r\n",
    "STAT delete_misses 0\r\n",
    "STAT delete_hits 0\r\n",
    "STAT incr_misses 0\r\n",
    "STAT incr_hits 0\r\n",
    "STAT decr_misses 0\r\n",
    "STAT decr_hits 0\r\n",
    "STAT cas_misses 0\r\n",
    "STAT cas_hits 0\r\n",
    "STAT cas_badval 0\r\n",
    "STAT touch_hits 0\r\n",
    "STAT touch_misses 0\r\n",
    "STAT store_too_large 0\r\n",
    "STAT store_no_memory 0\r\n",
    "STAT auth_cmds 0\r\n",
    "STAT auth_errors 0\r\n",
    "STAT bytes_read 16\r\n",
    "STAT bytes_written 7\r\n",
    "STAT limit_maxbytes 67108864\r\n",
    "STAT accepting_conns 1\r\n",
    "STAT listen_disabled_num 0\r\n",
    "STAT time_in_listen_disabled_us 0\r\n",
    "STAT threads 4\r\n",
    "STAT conn_yields 0\r\n",
    "STAT hash_power_level 16\r\n",
    "STAT hash_bytes 524288\r\n",
    "STAT hash_is_expanding 0\r\n",
    "STAT slab_reassign_rescues 0\r\n",
    "STAT slab_reassign_chunk_rescues 0\r\n",
    "STAT slab_reassign_evictions_nomem 0\r\n",
    "STAT slab_reassign_inline_reclaim 0\r\n",
    "STAT slab_reassign_busy_items 0\r\n",
    "STAT slab_reassign_busy_deletes 0\r\n",
    "STAT slab_reassign_running 0\r\n",
    "STAT slabs_moved 0\r\n",
    "STAT lru_crawler_running 0\r\n",
    "STAT lru_crawler_starts 105\r\n",
    "STAT lru_maintainer_juggles 271976\r\n",
    "STAT malloc_fails 0\r\n",
    "STAT log_worker_dropped 0\r\n",
    "STAT log_worker_written 0\r\n",
    "STAT log_watcher_skipped 0\r\n",
    "STAT log_watcher_sent 0\r\n",
    "STAT log_watchers 0\r\n",
    "STAT unexpected_napi_ids 0\r\n",
    "STAT round_robin_fallback 0\r\n",
    "STAT bytes 0\r\n",
    "STAT curr_items 0\r\n",
    "STAT total_items 0\r\n",
    "STAT slab_global_page_pool 0\r\n",
    "STAT expired_unfetched 0\r\n",
    "STAT evicted_unfetched 0\r\n",
    "STAT evicted_active 0\r\n",
    "STAT evictions 0\r\n",
    "STAT reclaimed 0\r\n",
    "STAT crawler_reclaimed 0\r\n",
    "STAT crawler_items_checked 0\r\n",
    "STAT lrutail_reflocked 0\r\n",
    "STAT moves_to_cold 0\r\n",
    "STAT moves_to_warm 0\r\n",
    "STAT moves_within_lru 0\r\n",
    "STAT direct_reclaims 0\r\n",
    "STAT lru_bumps_dropped 0\r\n",
    "END\r\n",
);

const METAS: &str = concat!(
    "key=mc-bench-0-337 exp=1769308159 la=1769307862 cas=28294 fetch=yes cls=13 size=1290 flags=0\r\n",
    "key=mc-bench-0-462 exp=1769308161 la=1769307862 cas=29360 fetch=yes cls=19 size=4574 flags=0\r\n",
    "key=mc-bench-0-122 exp=1769308158 la=1769307862 cas=27912 fetch=yes cls=14 size=1806 flags=0\r\n",
    "key=mc-bench-0-715 exp=1769308161 la=1769307862 cas=29370 fetch=yes cls=20 size=6271 flags=0\r\n",
    "key=mc-bench-0-490 exp=1769308162 la=1769307862 cas=29548 fetch=yes cls=21 size=7408 flags=0\r\n",
    "key=mc-bench-0-459 exp=1769308162 la=1769307862 cas=29792 fetch=yes cls=30 size=62575 flags=0\r\n",
    "key=mc-bench-0-192 exp=1769308160 la=1769307862 cas=28878 fetch=yes cls=20 size=7008 flags=0\r\n",
    "key=mc-bench-0-86 exp=1769308162 la=1769307862 cas=29728 fetch=yes cls=12 size=991 flags=0\r\n",
    "key=mc-bench-0-63 exp=1769308160 la=1769307862 cas=28764 fetch=yes cls=19 size=5459 flags=0\r\n",
    "key=mc-bench-0-484 exp=1769308159 la=1769307862 cas=28147 fetch=yes cls=7 size=324 flags=0\r\n",
    "key=mc-bench-0-557 exp=1769308155 la=1769307862 cas=26217 fetch=yes cls=22 size=9352 flags=0\r\n",
    "key=mc-bench-0-839 exp=1769308161 la=1769307862 cas=29316 fetch=yes cls=16 size=2402 flags=0\r\n",
    "key=mc-bench-0-830 exp=1769308157 la=1769307862 cas=27300 fetch=yes cls=20 size=7058 flags=0\r\n",
    "key=mc-bench-0-85 exp=1769308160 la=1769307862 cas=28632 fetch=yes cls=17 size=2923 flags=0\r\n",
    "key=mc-bench-0-292 exp=1769308162 la=1769307862 cas=29787 fetch=yes cls=12 size=1150 flags=0\r\n",
    "key=mc-bench-0-898 exp=1769308157 la=1769307862 cas=27338 fetch=yes cls=21 size=8668 flags=0\r\n",
    "key=mc-bench-0-33 exp=1769308162 la=1769307862 cas=29675 fetch=yes cls=22 size=9463 flags=0\r\n",
    "key=mc-bench-0-993 exp=1769308162 la=1769307862 cas=29777 fetch=yes cls=16 size=2749 flags=0\r\n",
    "key=mc-bench-0-965 exp=1769308159 la=1769307862 cas=28119 fetch=yes cls=20 size=6096 flags=0\r\n",
    "key=mc-bench-0-724 exp=1769308161 la=1769307862 cas=29309 fetch=yes cls=19 size=5559 flags=0\r\n",
    "key=mc-bench-0-992 exp=1769308157 la=1769307862 cas=27570 fetch=yes cls=18 size=3633 flags=0\r\n",
    "key=mc-bench-0-398 exp=1769308162 la=1769307862 cas=29851 fetch=yes cls=21 size=7438 flags=0\r\n",
    "key=mc-bench-0-302 exp=1769308162 la=1769307862 cas=29841 fetch=yes cls=21 size=7833 flags=0\r\n",
    "key=mc-bench-0-939 exp=1769308160 la=1769307862 cas=28922 fetch=yes cls=9 size=512 flags=0\r\n",
    "key=mc-bench-0-882 exp=1769308161 la=1769307862 cas=29475 fetch=yes cls=18 size=3722 flags=0\r\n",
    "key=mc-bench-0-312 exp=1769308159 la=1769307862 cas=28293 fetch=yes cls=22 size=9310 flags=0\r\n",
    "key=mc-bench-0-952 exp=1769308160 la=1769307862 cas=28962 fetch=yes cls=19 size=5573 flags=0\r\n",
    "key=mc-bench-0-483 exp=1769308161 la=1769307862 cas=29082 fetch=yes cls=29 size=42929 flags=0\r\n",
    "key=mc-bench-0-377 exp=1769308162 la=1769307862 cas=29789 fetch=yes cls=18 size=4154 flags=0\r\n",
    "key=mc-bench-0-47 exp=1769308159 la=1769307862 cas=28503 fetch=yes cls=18 size=3897 flags=0\r\n",
    "key=mc-bench-0-72 exp=1769308162 la=1769307862 cas=29626 fetch=yes cls=17 size=3472 flags=0\r\n",
    "key=mc-bench-0-518 exp=1769308155 la=1769307862 cas=26274 fetch=yes cls=14 size=1833 flags=0\r\n",
    "key=mc-bench-0-364 exp=1769308162 la=1769307862 cas=29847 fetch=yes cls=24 size=15006 flags=0\r\n",
    "key=mc-bench-0-12 exp=1769308161 la=1769307862 cas=29053 fetch=yes cls=15 size=2111 flags=0\r\n",
    "key=mc-bench-0-536 exp=1769308162 la=1769307862 cas=29599 fetch=yes cls=10 size=698 flags=0\r\n",
    "key=mc-bench-0-241 exp=1769308161 la=1769307862 cas=29065 fetch=yes cls=17 size=3130 flags=0\r\n",
    "key=mc-bench-0-195 exp=1769308162 la=1769307862 cas=29834 fetch=yes cls=23 size=11859 flags=0\r\n",
    "key=mc-bench-0-265 exp=1769308157 la=1769307862 cas=27069 fetch=yes cls=15 size=1967 flags=0\r\n",
    "key=mc-bench-0-436 exp=1769308161 la=1769307862 cas=29257 fetch=yes cls=15 size=2057 flags=0\r\n",
    "key=mc-bench-0-19 exp=1769308160 la=1769307862 cas=28763 fetch=yes cls=22 size=8975 flags=0\r\n",
    "key=mc-bench-0-907 exp=1769308161 la=1769307862 cas=29434 fetch=yes cls=25 size=18732 flags=0\r\n",
    "key=mc-bench-0-497 exp=1769308161 la=1769307862 cas=29412 fetch=yes cls=20 size=6511 flags=0\r\n",
    "key=mc-bench-0-343 exp=1769308161 la=1769307862 cas=29351 fetch=yes cls=16 size=2653 flags=0\r\n",
    "key=mc-bench-0-737 exp=1769308161 la=1769307862 cas=29268 fetch=yes cls=23 size=13611 flags=0\r\n",
    "key=mc-bench-0-491 exp=1769308160 la=1769307862 cas=28573 fetch=yes cls=23 size=11434 flags=0\r\n",
    "key=mc-bench-0-795 exp=1769308161 la=1769307862 cas=29098 fetch=yes cls=22 size=9637 flags=0\r\n",
    "key=mc-bench-0-925 exp=1769308162 la=1769307862 cas=29622 fetch=yes cls=11 size=827 flags=0\r\n",
    "key=mc-bench-0-141 exp=1769308158 la=1769307862 cas=27964 fetch=yes cls=17 size=2971 flags=0\r\n",
    "key=mc-bench-0-286 exp=1769308161 la=1769307862 cas=29068 fetch=yes cls=21 size=8487 flags=0\r\n",
    "key=mc-bench-0-686 exp=1769308161 la=1769307862 cas=29367 fetch=yes cls=17 size=3070 flags=0\r\n",
    "key=mc-bench-0-549 exp=1769308161 la=1769307862 cas=29260 fetch=yes cls=21 size=7151 flags=0\r\n",
    "key=mc-bench-0-620 exp=1769308162 la=1769307862 cas=29802 fetch=yes cls=19 size=5091 flags=0\r\n",
    "key=mc-bench-0-578 exp=1769308162 la=1769307862 cas=29654 fetch=yes cls=10 size=722 flags=0\r\n",
    "key=mc-bench-0-209 exp=1769308160 la=1769307862 cas=28776 fetch=yes cls=12 size=1135 flags=0\r\n",
    "key=mc-bench-0-680 exp=1769308162 la=1769307862 cas=29510 fetch=yes cls=25 size=20098 flags=0\r\n",
    "key=mc-bench-0-278 exp=1769308162 la=1769307862 cas=29784 fetch=yes cls=24 size=14178 flags=0\r\n",
    "key=mc-bench-0-232 exp=1769308162 la=1769307862 cas=29836 fetch=yes cls=9 size=575 flags=0\r\n",
    "key=mc-bench-0-116 exp=1769308157 la=1769307862 cas=27468 fetch=yes cls=26 size=23478 flags=0\r\n",
    "key=mc-bench-0-283 exp=1769308162 la=1769307862 cas=29684 fetch=yes cls=11 size=931 flags=0\r\n",
    "key=mc-bench-0-668 exp=1769308161 la=1769307862 cas=29216 fetch=yes cls=13 size=1276 flags=0\r\n",
    "key=mc-bench-0-825 exp=1769308157 la=1769307862 cas=27385 fetch=yes cls=22 size=10842 flags=0\r\n",
    "key=mc-bench-0-765 exp=1769308161 la=1769307862 cas=29425 fetch=yes cls=20 size=6341 flags=0\r\n",
    "key=mc-bench-0-757 exp=1769308160 la=1769307862 cas=28908 fetch=yes cls=22 size=10135 flags=0\r\n",
    "key=mc-bench-0-777 exp=1769308160 la=1769307862 cas=28909 fetch=yes cls=9 size=575 flags=0\r\n",
    "key=mc-bench-0-176 exp=1769308160 la=1769307862 cas=28829 fetch=yes cls=11 size=921 flags=0\r\n",
    "key=mc-bench-0-524 exp=1769308161 la=1769307862 cas=29461 fetch=yes cls=27 size=27212 flags=0\r\n",
    "key=mc-bench-0-34 exp=1769308161 la=1769307862 cas=29013 fetch=yes cls=22 size=9703 flags=0\r\n",
    "key=mc-bench-0-785 exp=1769308161 la=1769307862 cas=29314 fetch=yes cls=16 size=2821 flags=0\r\n",
    "key=mc-bench-0-981 exp=1769308162 la=1769307862 cas=29776 fetch=yes cls=13 size=1279 flags=0\r\n",
    "key=mc-bench-0-832 exp=1769308160 la=1769307862 cas=28913 fetch=yes cls=20 size=6228 flags=0\r\n",
    "key=mc-bench-0-110 exp=1769308160 la=1769307862 cas=28768 fetch=yes cls=2 size=109 flags=0\r\n",
    "key=mc-bench-0-515 exp=1769308160 la=1769307862 cas=28701 fetch=yes cls=18 size=3977 flags=0\r\n",
    "key=mc-bench-0-704 exp=1769308162 la=1769307862 cas=29562 fetch=yes cls=15 size=2179 flags=0\r\n",
    "key=mc-bench-0-262 exp=1769308162 la=1769307862 cas=29585 fetch=yes cls=19 size=5212 flags=0\r\n",
    "key=mc-bench-0-957 exp=1769308160 la=1769307862 cas=28592 fetch=yes cls=23 size=11795 flags=0\r\n",
    "key=mc-bench-0-128 exp=1769308161 la=1769307862 cas=29393 fetch=yes cls=22 size=10036 flags=0\r\n",
    "key=mc-bench-0-224 exp=1769308161 la=1769307862 cas=29152 fetch=yes cls=14 size=1523 flags=0\r\n",
    "key=mc-bench-0-842 exp=1769308160 la=1769307862 cas=29003 fetch=yes cls=16 size=2539 flags=0\r\n",
    "key=mc-bench-0-666 exp=1769308158 la=1769307862 cas=27602 fetch=yes cls=7 size=337 flags=0\r\n",
    "key=mc-bench-0-705 exp=1769308162 la=1769307862 cas=29604 fetch=yes cls=21 size=8822 flags=0\r\n",
    "key=mc-bench-0-466 exp=1769308162 la=1769307862 cas=29501 fetch=yes cls=9 size=574 flags=0\r\n",
    "key=mc-bench-0-332 exp=1769308160 la=1769307862 cas=28889 fetch=yes cls=23 size=12224 flags=0\r\n",
    "key=mc-bench-0-120 exp=1769308161 la=1769307862 cas=29057 fetch=yes cls=22 size=9961 flags=0\r\n",
    "key=mc-bench-0-764 exp=1769308161 la=1769307862 cas=29269 fetch=yes cls=22 size=9149 flags=0\r\n",
    "key=mc-bench-0-539 exp=1769308162 la=1769307862 cas=29759 fetch=yes cls=21 size=7892 flags=0\r\n",
    "key=mc-bench-0-404 exp=1769308160 la=1769307862 cas=28892 fetch=yes cls=22 size=9687 flags=0\r\n",
    "key=mc-bench-0-607 exp=1769308162 la=1769307862 cas=29554 fetch=yes cls=19 size=5241 flags=0\r\n",
    "key=mc-bench-0-103 exp=1769308162 la=1769307862 cas=29732 fetch=yes cls=18 size=4459 flags=0\r\n",
    "key=mc-bench-0-891 exp=1769308162 la=1769307862 cas=29772 fetch=yes cls=1 size=93 flags=0\r\n",
    "key=mc-bench-0-799 exp=1769308159 la=1769307862 cas=28538 fetch=yes cls=24 size=17283 flags=0\r\n",
    "key=mc-bench-0-218 exp=1769308159 la=1769307862 cas=28462 fetch=yes cls=23 size=12761 flags=0\r\n",
    "key=mc-bench-0-28 exp=1769308161 la=1769307862 cas=29235 fetch=yes cls=25 size=17666 flags=0\r\n",
    "key=mc-bench-0-616 exp=1769308162 la=1769307862 cas=29801 fetch=yes cls=17 size=3380 flags=0\r\n",
    "key=mc-bench-0-727 exp=1769308159 la=1769307862 cas=28346 fetch=yes cls=18 size=4192 flags=0\r\n",
    "key=mc-bench-0-271 exp=1769308160 la=1769307862 cas=28885 fetch=yes cls=15 size=1992 flags=0\r\n",
    "key=mc-bench-0-467 exp=1769308162 la=1769307862 cas=29695 fetch=yes cls=18 size=4290 flags=0\r\n",
    "key=mc-bench-0-597 exp=1769308162 la=1769307862 cas=29699 fetch=yes cls=19 size=5065 flags=0\r\n",
    "key=mc-bench-0-266 exp=1769308154 la=1769307862 cas=25542 fetch=yes cls=24 size=16542 flags=0\r\n",
    "key=mc-bench-0-202 exp=1769308159 la=1769307862 cas=28423 fetch=yes cls=17 size=3507 flags=0\r\n",
    "key=mc-bench-0-503 exp=1769308161 la=1769307862 cas=29209 fetch=yes cls=15 size=2010 flags=0\r\n",
    "key=mc-bench-0-690 exp=1769308155 la=1769307862 cas=26314 fetch=yes cls=21 size=7686 flags=0\r\n",
    "key=mc-bench-0-537 exp=1769308160 la=1769307862 cas=28845 fetch=yes cls=21 size=8087 flags=0\r\n",
    "key=mc-bench-0-70 exp=1769308162 la=1769307862 cas=29678 fetch=yes cls=14 size=1601 flags=0\r\n",
    "key=mc-bench-0-447 exp=1769308157 la=1769307862 cas=27082 fetch=yes cls=19 size=5191 flags=0\r\n",
    "key=mc-bench-0-69 exp=1769308161 la=1769307862 cas=29014 fetch=yes cls=16 size=2547 flags=0\r\n",
    "key=mc-bench-0-678 exp=1769308161 la=1769307862 cas=29167 fetch=yes cls=5 size=197 flags=0\r\n",
    "key=mc-bench-0-290 exp=1769308162 la=1769307862 cas=29786 fetch=yes cls=25 size=19084 flags=0\r\n",
    "key=mc-bench-0-996 exp=1769308161 la=1769307862 cas=29440 fetch=yes cls=13 size=1352 flags=0\r\n",
    "key=mc-bench-0-360 exp=1769308162 la=1769307862 cas=29642 fetch=yes cls=17 size=3441 flags=0\r\n",
    "key=mc-bench-0-644 exp=1769308159 la=1769307862 cas=28256 fetch=yes cls=23 size=11436 flags=0\r\n",
    "key=mc-bench-0-831 exp=1769308162 la=1769307862 cas=29615 fetch=yes cls=24 size=16109 flags=0\r\n",
    "key=mc-bench-0-931 exp=1769308158 la=1769307862 cas=28007 fetch=yes cls=13 size=1408 flags=0\r\n",
    "key=mc-bench-0-588 exp=1769308157 la=1769307862 cas=27283 fetch=yes cls=18 size=3833 flags=0\r\n",
    "key=mc-bench-0-609 exp=1769308161 la=1769307862 cas=29032 fetch=yes cls=24 size=16327 flags=0\r\n",
    "key=mc-bench-0-577 exp=1769308161 la=1769307862 cas=29212 fetch=yes cls=17 size=3303 flags=0\r\n",
    "key=mc-bench-0-636 exp=1769308162 la=1769307862 cas=29804 fetch=yes cls=18 size=3867 flags=0\r\n",
    "key=mc-bench-0-83 exp=1769308161 la=1769307862 cas=29389 fetch=yes cls=16 size=2330 flags=0\r\n",
    "key=mc-bench-0-395 exp=1769308159 la=1769307862 cas=28301 fetch=yes cls=18 size=4016 flags=0\r\n",
    "key=mc-bench-0-334 exp=1769308159 la=1769307862 cas=28141 fetch=yes cls=23 size=13706 flags=0\r\n",
    "key=mc-bench-0-200 exp=1769308160 la=1769307862 cas=28973 fetch=yes cls=19 size=4720 flags=0\r\n",
    "key=mc-bench-0-479 exp=1769308159 la=1769307862 cas=28475 fetch=yes cls=24 size=14634 flags=0\r\n",
    "key=mc-bench-0-956 exp=1769308156 la=1769307862 cas=27008 fetch=yes cls=15 size=2063 flags=0\r\n",
    "key=mc-bench-0-672 exp=1769308161 la=1769307862 cas=29419 fetch=yes cls=21 size=7767 flags=0\r\n",
    "key=mc-bench-0-433 exp=1769308162 la=1769307862 cas=29856 fetch=yes cls=24 size=15863 flags=0\r\n",
    "key=mc-bench-0-36 exp=1769308162 la=1769307862 cas=29578 fetch=yes cls=12 size=946 flags=0\r\n",
    "key=mc-bench-0-257 exp=1769308161 la=1769307862 cas=29451 fetch=yes cls=18 size=4439 flags=0\r\n",
    "key=mc-bench-0-871 exp=1769308161 la=1769307862 cas=29099 fetch=yes cls=8 size=474 flags=0\r\n",
    "key=mc-bench-0-417 exp=1769308157 la=1769307862 cas=27362 fetch=yes cls=18 size=4252 flags=0\r\n",
    "key=mc-bench-0-516 exp=1769308157 la=1769307862 cas=27277 fetch=yes cls=19 size=5219 flags=0\r\n",
    "key=mc-bench-0-263 exp=1769308162 la=1769307862 cas=29537 fetch=yes cls=24 size=15979 flags=0\r\n",
    "key=mc-bench-0-101 exp=1769308161 la=1769307862 cas=29390 fetch=yes cls=21 size=7287 flags=0\r\n",
    "key=mc-bench-0-42 exp=1769308162 la=1769307862 cas=29724 fetch=yes cls=20 size=5786 flags=0\r\n",
    "key=mc-bench-0-386 exp=1769308158 la=1769307862 cas=27980 fetch=yes cls=26 size=22868 flags=0\r\n",
    "key=mc-bench-0-328 exp=1769308159 la=1769307862 cas=28331 fetch=yes cls=24 size=15517 flags=0\r\n",
    "key=mc-bench-0-798 exp=1769308159 la=1769307862 cas=28490 fetch=yes cls=19 size=5613 flags=0\r\n",
    "key=mc-bench-0-592 exp=1769308155 la=1769307862 cas=26401 fetch=yes cls=14 size=1656 flags=0\r\n",
    "key=mc-bench-0-22 exp=1769308162 la=1769307862 cas=29821 fetch=yes cls=22 size=10812 flags=0\r\n",
    "key=mc-bench-0-626 exp=1769308161 la=1769307862 cas=29213 fetch=yes cls=22 size=11099 flags=0\r\n",
    "key=mc-bench-0-238 exp=1769308162 la=1769307862 cas=29783 fetch=yes cls=15 size=2288 flags=0\r\n",
    "key=mc-bench-0-552 exp=1769308154 la=1769307862 cas=25928 fetch=yes cls=21 size=7150 flags=0\r\n",
    "key=mc-bench-0-175 exp=1769308160 la=1769307862 cas=28828 fetch=yes cls=20 size=5845 flags=0\r\n",
    "key=mc-bench-0-126 exp=1769308161 la=1769307862 cas=29190 fetch=yes cls=13 size=1383 flags=0\r\n",
    "key=mc-bench-0-553 exp=1769308157 la=1769307862 cas=27319 fetch=yes cls=18 size=4506 flags=0\r\n",
    "key=mc-bench-0-658 exp=1769308162 la=1769307862 cas=29766 fetch=yes cls=18 size=4112 flags=0\r\n",
    "key=mc-bench-0-567 exp=1769308161 la=1769307862 cas=29417 fetch=yes cls=14 size=1518 flags=0\r\n",
    "key=mc-bench-0-844 exp=1769308162 la=1769307862 cas=29769 fetch=yes cls=24 size=13896 flags=0\r\n",
    "key=mc-bench-0-973 exp=1769308159 la=1769307862 cas=28360 fetch=yes cls=12 size=1182 flags=0\r\n",
    "key=mc-bench-0-173 exp=1769308161 la=1769307862 cas=29341 fetch=yes cls=20 size=5810 flags=0\r\n",
    "key=mc-bench-0-79 exp=1769308159 la=1769307862 cas=28278 fetch=yes cls=17 size=3323 flags=0\r\n",
    "key=mc-bench-0-210 exp=1769308162 la=1769307862 cas=29583 fetch=yes cls=23 size=12250 flags=0\r\n",
    "key=mc-bench-0-942 exp=1769308154 la=1769307862 cas=25945 fetch=yes cls=17 size=3234 flags=0\r\n",
    "key=mc-bench-0-82 exp=1769308159 la=1769307862 cas=28368 fetch=yes cls=23 size=13335 flags=0\r\n",
    "key=mc-bench-0-631 exp=1769308160 la=1769307862 cas=28993 fetch=yes cls=24 size=14896 flags=0\r\n",
    "key=mc-bench-0-967 exp=1769308160 la=1769307862 cas=28679 fetch=yes cls=13 size=1468 flags=0\r\n",
    "key=mc-bench-0-289 exp=1769308155 la=1769307862 cas=26435 fetch=yes cls=19 size=5474 flags=0\r\n",
    "key=mc-bench-0-513 exp=1769308162 la=1769307862 cas=29796 fetch=yes cls=23 size=11357 flags=0\r\n",
    "key=mc-bench-0-596 exp=1769308161 la=1769307862 cas=29467 fetch=yes cls=18 size=3961 flags=0\r\n",
    "key=mc-bench-0-139 exp=1769308160 la=1769307862 cas=28930 fetch=yes cls=18 size=4332 flags=0\r\n",
    "key=mc-bench-0-304 exp=1769308161 la=1769307862 cas=29350 fetch=yes cls=20 size=6288 flags=0\r\n",
    "key=mc-bench-0-87 exp=1769308162 la=1769307862 cas=29580 fetch=yes cls=17 size=3618 flags=0\r\n",
    "key=mc-bench-0-58 exp=1769308157 la=1769307862 cas=27060 fetch=yes cls=20 size=5813 flags=0\r\n",
    "key=mc-bench-0-434 exp=1769308160 la=1769307862 cas=28840 fetch=yes cls=17 size=3275 flags=0\r\n",
    "key=mc-bench-0-410 exp=1769308162 la=1769307862 cas=29593 fetch=yes cls=13 size=1315 flags=0\r\n",
    "key=mc-bench-0-958 exp=1769308160 la=1769307862 cas=28593 fetch=yes cls=22 size=10110 flags=0\r\n",
    "key=mc-bench-0-161 exp=1769308162 la=1769307862 cas=29738 fetch=yes cls=28 size=42383 flags=0\r\n",
    "key=mc-bench-0-378 exp=1769308162 la=1769307862 cas=29849 fetch=yes cls=20 size=6661 flags=0\r\n",
    "key=mc-bench-0-585 exp=1769308162 la=1769307862 cas=29697 fetch=yes cls=21 size=7634 flags=0\r\n",
    "key=mc-bench-0-741 exp=1769308161 la=1769307862 cas=29423 fetch=yes cls=15 size=1912 flags=0\r\n",
    "key=mc-bench-0-642 exp=1769308158 la=1769307862 cas=27799 fetch=yes cls=26 size=24883 flags=0\r\n",
    "key=mc-bench-0-388 exp=1769308160 la=1769307862 cas=28605 fetch=yes cls=14 size=1613 flags=0\r\n",
    "key=mc-bench-0-124 exp=1769308158 la=1769307862 cas=27961 fetch=yes cls=26 size=23682 flags=0\r\n",
    "key=mc-bench-0-694 exp=1769308162 la=1769307862 cas=29873 fetch=yes cls=26 size=25284 flags=0\r\n",
    "key=mc-bench-0-645 exp=1769308162 la=1769307862 cas=29703 fetch=yes cls=22 size=10461 flags=0\r\n",
    "key=mc-bench-0-550 exp=1769308161 la=1769307862 cas=29415 fetch=yes cls=21 size=8455 flags=0\r\n",
    "key=mc-bench-0-2 exp=1769308161 la=1769307862 cas=29328 fetch=yes cls=18 size=4190 flags=0\r\n",
    "key=mc-bench-0-572 exp=1769308161 la=1769307862 cas=29030 fetch=yes cls=11 size=932 flags=0\r\n",
    "key=mc-bench-0-953 exp=1769308162 la=1769307862 cas=29624 fetch=yes cls=15 size=2106 flags=0\r\n",
    "key=mc-bench-0-244 exp=1769308162 la=1769307862 cas=29837 fetch=yes cls=18 size=4494 flags=0\r\n",
    "key=mc-bench-0-647 exp=1769308162 la=1769307862 cas=29870 fetch=yes cls=17 size=2975 flags=0\r\n",
    "key=mc-bench-0-520 exp=1769308161 la=1769307862 cas=29083 fetch=yes cls=10 size=661 flags=0\r\n",
    "END\r\n",
);

const GETS: &str = concat!(
    "VALUE foo1 32 4 1\r\n",
    "bar1\r\n",
    "VALUE foo2 32 4 1\r\n",
    "bar2\r\n",
    "VALUE foo3 32 4 1\r\n",
    "bar3\r\n",
    "VALUE foo4 32 4 1\r\n",
    "bar4\r\n",
    "VALUE foo5 32 4 1\r\n",
    "bar5\r\n",
    "VALUE foo6 32 4 1\r\n",
    "bar6\r\n",
    "VALUE foo7 32 4 1\r\n",
    "bar7\r\n",
    "VALUE foo8 32 4 1\r\n",
    "bar8\r\n",
    "VALUE foo9 32 4 1\r\n",
    "bar9\r\n",
    "VALUE foo10 32 5 1\r\n",
    "bar10\r\n",
    "END\r\n",
);
